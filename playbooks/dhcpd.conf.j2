# ==================================================
# DHCP Server Configuration
# Domínio: {{ dominio }}
# Projeto DevOps - IFPB
# ==================================================

authoritative;

default-lease-time 180;
max-lease-time 3600;


# ================= REDE =================

subnet {{ rede.split('/')[0] }} netmask 255.255.255.0 {

    range {{ dhcp_range_start }} {{ dhcp_range_end }};

    option domain-name "{{ dominio }}";
    option domain-name-servers {{ ip_arq }};
    option routers {{ gateway }};
    option subnet-mask 255.255.255.0;
    option broadcast-address 192.168.56.255;


    # ================= RESERVAS ESTÁTICAS =================

    host db.{{ dominio }} {
        hardware ethernet 08:00:27:1A:00:21;  # MAC do DB (Vagrantfile)
        fixed-address {{ ip_db }};
    }

    host app.{{ dominio }} {
        hardware ethernet 08:00:27:2B:21:00;  # MAC do APP (Vagrantfile)
        fixed-address {{ ip_app }};
    }
}
